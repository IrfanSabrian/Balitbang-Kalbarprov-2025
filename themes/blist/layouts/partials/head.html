<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="icon" href='{{ if isset .Site.Params "favicon" }}{{ .Site.Params.favicon }}{{ else }}/favicon.ico{{ end }}'>

  <!-- Menambahkan font Marcellus dari Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Marcellus&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

  <link rel="stylesheet" href="https://unpkg.com/swiper/swiper-bundle.min.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">


  <title>
  {{ if not .IsHome }}{{ .Title }} - {{ end }}{{ site.Title }}
  </title>
  <meta name="description" content="{{ with .Description }}{{ . }}{{ else }}{{if .IsPage}}{{ .Summary }}{{ else }}{{ with .Site.Params.description }}{{ . }}{{ end }}{{ end }}{{ end -}}" />

  <!-- Menambahkan file CSS -->
  {{ hugo.Generator }}
  {{ $styles := resources.Get "css/styles.css" | postCSS (dict "config" "./assets/css/postcss.config.js") -}}
  {{ if hugo.IsServer }}
  <link rel="stylesheet" href="{{ $styles.RelPermalink }}" />
  {{ else }}
  {{- $styles := $styles | css.PostCSS | minify | fingerprint -}}
  <link rel="stylesheet" href="{{ $styles.Permalink }}" />
  {{ end }}

  <style>
    body {
      font-family: 'poppins', serif;
    }
  </style>

  <!-- Katex support -->
  {{ if .Params.math }}
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/katex@0.10.0-rc.1/dist/katex.min.css"
      integrity="sha384-D+9gmBxUQogRLqvARvNLmA9hS2x//eK1FhVb9PiU86gmcrBrJAQT8okdJ4LMp2uv"
      crossorigin="anonymous"
    >
  {{ end }}

  {{ range .AlternativeOutputFormats -}}
    {{ printf `<link rel="%s" type="%s" href="%s" title="%s" />` .Rel .MediaType.Type .RelPermalink $.Site.Title | safeHTML }}
  {{ end -}}

  {{ template "_internal/opengraph.html" . }}
  {{ template "_internal/twitter_cards.html" . }}
  {{ template "_internal/schema.html" . }}

  {{ if gt (len .Site.Languages) 1}}
  <meta name="lang" content="{{ .Site.Language }}" />
  {{ end }}
  <link rel="stylesheet" href='{{ "/assets/owl.carousel.min.css" | relURL }}'>
  <script src="{{ "jquery-3.7.0.min.js" | relURL }}"></script>
  <script src="{{ "owl.carousel.min.js" | relURL }}"></script>
  <style>
    .owl-carousel .owl-item img {
      object-fit: cover;
    }
    iframe{
    width: 100%;
    }
    .mobile-menu .relative:hover .language-dropdown {
        display: flex;
    }

    .language-dropdown {
      display: none;
    }

  </style>
  <link
  rel="stylesheet"
  href="{{ "swiper-10.2.0/package/swiper-bundle.min.css" | relURL }}"
/>

<script src="{{ "swiper-10.2.0/package/swiper-bundle.min.js" | relURL }}"></script>

<script>
      document.addEventListener('DOMContentLoaded', function() {
          const observerOptions = {
              root: null,
              rootMargin: '0px',
              threshold: 0.3
          };

          const observer = new IntersectionObserver((entries, observer) => {
              entries.forEach(entry => {
                  if (entry.isIntersecting) {
                      entry.target.classList.add('show');
                      observer.unobserve(entry.target);
                  }
              });
          }, observerOptions);

          const elements = document.querySelectorAll('.fade-in');
          elements.forEach(element => {
              observer.observe(element);
          });
      });
  </script>

<!-- Universal Modal -->
<div
  id="modal"
  class="hidden fixed inset-0 z-50 justify-center items-center bg-black bg-opacity-50 overflow-auto"
>
  <div class="relative bg-white w-11/12 md:w-8/12 p-6 overflow-auto rounded-lg max-h-[80vh]">
    <!-- Close button -->
    <button
      class="absolute top-2 right-2 text-gray-400 p-4 text-3xl close-modal"
    >
      <i class="fas fa-times"></i>
    </button>

    <!-- Title -->
    <h2 class="modal-title text-xl font-semibold text-center mb-4 mx-8"></h2>

    <!-- Modal Body -->
    <div class="modal-body flex flex-col space-y-4 max-h-[70vh] overflow-y-auto p-4">
      <!-- Dynamic content -->
    </div>
  </div>
</div>

<script>
  document.addEventListener("DOMContentLoaded", function () {
  const modal = document.getElementById("modal");
  const modalTitle = modal.querySelector(".modal-title");
  const modalBody = modal.querySelector(".modal-body");
  const closeModalButtons = modal.querySelectorAll(".close-modal");

  const hideModal = () => {
    modal.classList.add("hidden");
    modal.classList.remove("flex");
    modalBody.innerHTML = ""; // Clear modal content
    document.body.style.overflow = ""; // Restore scrolling
  };

  // Close modal on button click or outside click
  closeModalButtons.forEach((btn) =>
    btn.addEventListener("click", hideModal)
  );
  modal.addEventListener("click", (e) => {
    if (e.target === modal) hideModal();
  });

  // Open modal dynamically
  document.querySelectorAll("[data-modal]").forEach((trigger) => {
    trigger.addEventListener("click", async () => {
      const title = trigger.getAttribute("data-title") || "Untitled";
      const contentUrl = trigger.getAttribute("data-modal");

      // Fetch content (if URL is provided)
      let content = "";
      if (contentUrl) {
        const response = await fetch(contentUrl);
        content = await response.text();
      }

      // Extract <img> tags from content
      const imgTags = content.match(/<p><img [^>]*src="([^"]*)"[^>]*>/g) || [];
      const imgSrcs = imgTags.map((tag) => {
        const match = tag.match(/src="([^"]*)"/);
        return match ? match[1] : null;
      });

      // Populate modal
      modalTitle.textContent = title;
      modalBody.innerHTML = imgSrcs
        .map(
          (src) =>
            `<img class="w-full rounded-lg shadow-sm" src="${src}" alt="${title}" />`
        )
        .join("");

      // Show modal
      modal.classList.remove("hidden");
      modal.classList.add("flex");
      document.body.style.overflow = "hidden"; // Disable scrolling
    });
  });
});

</script>

<style>
  /* Universal Modal Container */
#modal {
  transition: opacity 0.3s ease;
  z-index: 53;
}

/* Hide modal when not active */
#modal.hidden {
  opacity: 0;
  pointer-events: none;
}

/* Modal container style */
#modal .bg-white {
  padding: 1.5rem; /* Sesuai padding sebelumnya */
  border-radius: 0.5rem; /* Sesuai dengan rounded-lg */
  max-height: 90vh; /* Membatasi tinggi modal */
  display: flex;
  flex-direction: column;
  overflow: hidden;
}

/* Modal Title */
.modal-title {
  margin: 1rem 2rem; /* Margin seperti sebelumnya */
}

/* Modal Body with scroll */
.modal-body {
  padding: 1rem; /* Menambah padding dalam modal body */
  overflow-y: auto; /* Mengaktifkan scroll hanya pada body modal */
  max-height: 70vh; /* Membatasi tinggi body modal */
}

/* Images in modal */
.modal-body img {
  max-width: 100%;
  border-radius: 0.25rem; /* Rounded seperti sebelumnya */
  margin-bottom: 1rem; /* Margin bawah untuk spasi */
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1); /* Shadow seperti sebelumnya */
}

</style>

    <!-- Img Modal with Fancybox -->
    <a id="imgModal" data-fancybox="gallery" href="" style="display: none;"></a>

    <script>
        function openImgModal(file) {
            const imgModal = document.getElementById('imgModal');
            imgModal.href = file;
            $.fancybox.open({
                src: file,
                type: 'image',
                opts: {
                    afterClose: function() {
                        document.body.style.overflow = ''; // Restore scrolling outside the modal
                    }
                }
            });
            document.body.style.overflow = 'hidden'; // Disable scrolling outside the modal
        }
    </script>


    <!-- PDF Modal -->
    <div id="pdfModal" class="fixed inset-0 z-50 bg-black bg-opacity-75 flex items-center justify-center hidden transition-opacity duration-300 ease-in-out">
        <button id="closeModal" class="absolute top-4 right-4 text-white text-3xl transition-transform duration-300 ease-in-out transform hover:scale-110">
            <i class="fas fa-times"></i>
        </button>
        <iframe id="pdfViewer" class="w-6/12 h-full" frameborder="0" style="overflow: auto;"></iframe>
    </div>

    <script>
        function openPdfModal(link) {
            const pdfModal = document.getElementById('pdfModal');
            const pdfViewer = document.getElementById('pdfViewer');
            pdfViewer.src = link;
            pdfModal.classList.remove('hidden');
            pdfModal.style.opacity = '0';
            setTimeout(() => {
                pdfModal.style.opacity = '1';
            }, 10);
            document.body.style.overflow = 'hidden'; // Disable scrolling outside the modal
        }

        function closePdfModal() {
            const pdfModal = document.getElementById('pdfModal');
            const pdfViewer = document.getElementById('pdfViewer');
            pdfModal.style.opacity = '0';
            setTimeout(() => {
                pdfViewer.src = '';
                pdfModal.classList.add('hidden');
                document.body.style.overflow = ''; // Restore scrolling outside the modal
            }, 300);
        }

        document.getElementById('closeModal').addEventListener('click', closePdfModal);

        document.getElementById('pdfModal').addEventListener('click', function(event) {
            const pdfViewer = document.getElementById('pdfViewer');
            if (!pdfViewer.contains(event.target)) {
                closePdfModal();
            }
        });
    </script>

</head>
