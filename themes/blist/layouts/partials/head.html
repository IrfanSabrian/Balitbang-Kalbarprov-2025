<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="icon" href='{{ if isset .Site.Params "favicon" }}{{ .Site.Params.favicon }}{{ else }}/favicon.ico{{ end }}'>

  <!-- Menambahkan font Marcellus dari Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Marcellus&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

  <link rel="stylesheet" href="https://unpkg.com/swiper/swiper-bundle.min.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">


  <title>
  {{ if not .IsHome }}{{ .Title }} - {{ end }}{{ site.Title }}
  </title>
  <meta name="description" content="{{ with .Description }}{{ . }}{{ else }}{{if .IsPage}}{{ .Summary }}{{ else }}{{ with .Site.Params.description }}{{ . }}{{ end }}{{ end }}{{ end -}}" />

  <!-- Menambahkan file CSS -->
  {{ hugo.Generator }}
  {{ $styles := resources.Get "css/styles.css" | postCSS (dict "config" "./assets/css/postcss.config.js") -}}
  {{ if hugo.IsServer }}
  <link rel="stylesheet" href="{{ $styles.RelPermalink }}" />
  {{ else }}
  {{- $styles := $styles | css.PostCSS | minify | fingerprint -}}
  <link rel="stylesheet" href="{{ $styles.Permalink }}" />
  {{ end }}

  <style>
    body {
      font-family: 'poppins', serif;
    }
  </style>

  <!-- Katex support -->
  {{ if .Params.math }}
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/katex@0.10.0-rc.1/dist/katex.min.css"
      integrity="sha384-D+9gmBxUQogRLqvARvNLmA9hS2x//eK1FhVb9PiU86gmcrBrJAQT8okdJ4LMp2uv"
      crossorigin="anonymous"
    >
  {{ end }}

  {{ range .AlternativeOutputFormats -}}
    {{ printf `<link rel="%s" type="%s" href="%s" title="%s" />` .Rel .MediaType.Type .RelPermalink $.Site.Title | safeHTML }}
  {{ end -}}

  {{ template "_internal/opengraph.html" . }}
  {{ template "_internal/twitter_cards.html" . }}
  {{ template "_internal/schema.html" . }}

  {{ if gt (len .Site.Languages) 1}}
  <meta name="lang" content="{{ .Site.Language }}" />
  {{ end }}
  <link rel="stylesheet" href='{{ "/assets/owl.carousel.min.css" | relURL }}'>
  <script src="{{ "jquery-3.7.0.min.js" | relURL }}"></script>
  <script src="{{ "owl.carousel.min.js" | relURL }}"></script>
  <style>
    .owl-carousel .owl-item img {
      object-fit: cover;
    }
    iframe{
    width: 100%;
    }
    .mobile-menu .relative:hover .language-dropdown {
        display: flex;
    }

    .language-dropdown {
      display: none;
    }

  </style>
  <link
  rel="stylesheet"
  href="{{ "swiper-10.2.0/package/swiper-bundle.min.css" | relURL }}"
/>

<script src="{{ "swiper-10.2.0/package/swiper-bundle.min.js" | relURL }}"></script>

<script>
      document.addEventListener('DOMContentLoaded', function() {
          const observerOptions = {
              root: null,
              rootMargin: '0px',
              threshold: 0.3
          };

          const observer = new IntersectionObserver((entries, observer) => {
              entries.forEach(entry => {
                  if (entry.isIntersecting) {
                      entry.target.classList.add('show');
                      observer.unobserve(entry.target);
                  }
              });
          }, observerOptions);

          const elements = document.querySelectorAll('.fade-in');
          elements.forEach(element => {
              observer.observe(element);
          });
      });
  </script>

<!-- Modal -->
<div
  id="flyerModal"
  class="hidden fixed inset-0 z-50 justify-center items-center bg-black bg-opacity-50 overflow-auto"
>
  <div class="relative bg-white w-11/12 md:w-8/12 p-6 overflow-auto rounded-lg max-h-[80vh]">
    <!-- Close button -->
    <button
      id="closeModal"
      class="absolute top-2 right-2 text-gray-400 p-4 text-3xl"
    >
      <i class="fas fa-times"></i>
    </button>

    <!-- Title -->
    <h2 id="modalTitle" class="text-xl font-semibold text-center mb-4 mx-8"></h2>

    <!-- Modal Body with Images -->
    <div id="modalBody" class="flex flex-col space-y-4 max-h-[70vh] overflow-y-auto">
      <!-- Gambar-gambar dari konten -->
    </div>
  </div>
</div>

<script>
  document.addEventListener("DOMContentLoaded", function () {
  const modal = document.getElementById("flyerModal");
  const modalTitle = document.getElementById("modalTitle");
  const modalBody = document.getElementById("modalBody");
  const closeModal = document.getElementById("closeModal");

  const hideModal = () => {
    modal.classList.add("hidden");
    modal.classList.remove("flex");
    modalBody.innerHTML = ""; // Clear modal content when closed
    document.body.style.overflow = ''; // Kembalikan scroll halaman
  };

  closeModal.addEventListener("click", hideModal);

  modal.addEventListener("click", (e) => {
    if (e.target === modal) {
      hideModal();
    }
  });

  // Membuka modal saat flyer diklik
  document.querySelectorAll("[data-modal]").forEach((flyer) => {
    flyer.addEventListener("click", async () => {
      const title = flyer.querySelector(".text-base")?.textContent || "Untitled";

      // Fetch Markdown content
      const contentUrl = flyer.getAttribute("data-modal");
      const response = await fetch(contentUrl);
      const markdown = await response.text();

      // Extract <img> tags from Markdown content (ignoring thumbnail)
      const imgTags = markdown.match(/<p><img [^>]*src="([^"]*)"[^>]*>/g) || [];
      const imgSrcs = imgTags.map((tag) => {
        const match = tag.match(/src="([^"]*)"/);
        return match ? match[1] : null;
      });

      // Populate modal (Only images from <p><img> tag)
      modalTitle.textContent = title;
      modalBody.innerHTML = imgSrcs
        .map(
          (src) =>
            `<img class="w-full rounded-lg shadow-sm" src="${src}" alt="${title}" />`
        )
        .join("");

      // Show modal
      modal.classList.remove("hidden");
      modal.classList.add("flex");

      // Disable body scroll when modal is open
      document.body.style.overflow = 'hidden';
    });
  });
});

</script>

  <style>
/* Modal Container */
#flyerModal {
  transition: opacity 0.3s ease;
  z-index: 53;
}

/* Menyembunyikan modal ketika tidak aktif */
#flyerModal.hidden {
  opacity: 0;
  pointer-events: none;
}

/* Membatasi ukuran modal dan menambahkan jarak 5% atas dan bawah */
#flyerModal .bg-white {
  max-height: 90vh; /* Mengatur agar modal tidak lebih besar dari 90% dari viewport */
  overflow: hidden; /* Pastikan konten lainnya tidak meluap */
  display: flex;
  flex-direction: column;
}

/* Body modal dengan scroll */
#modalBody {
  overflow-y: auto; /* Mengaktifkan scroll hanya pada body modal */
  max-height: 90vh; /* Membatasi tinggi body modal */
}

/* Gambar di dalam modal */
#modalBody img {
  max-width: 100%;
  margin-bottom: 1rem;
}

  </style>

</head>
