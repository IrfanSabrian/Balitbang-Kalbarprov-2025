{{ define "main" }}

<!-- Running Text -->
{{ $runningText := .Site.Params.running_text }}
{{ if $runningText }}
<div class="w-full max-w-full bg-white p-4 border border-gray-300 shadow rounded">
    <div class="marquee">
        <div class="marquee-text">
            <p class="text-lg font-semibold text-black" style="font-size: 0.9rem;">{{ range $runningText }}{{ .text }}&nbsp;&nbsp;&nbsp;&nbsp;    {{ end }}</p>
        </div>
    </div>
</div>
{{ end }}

    <style>
    .marquee {
        overflow: hidden;
        white-space: nowrap;
        box-sizing: border-box;
    }
    .marquee-text {
        display: inline-block;
        padding-left: 100%;
        animation: marquee 20s linear infinite;
    }

    @keyframes marquee {
        0% { transform: translateX(0); }
        100% { transform: translateX(-100%); }
    }

    /* CSS styling for Swiper */
    .swiper-slide {
        text-align: center;
        font-size: 18px;
        background: #fff;
        display: flex;
        justify-content: center;
        align-items: center;
    }
    .swiper-slide img {
        display: block;
        width: 100%;
        height: 100%;
        object-fit: cover;
    }



  .container {
    white-space: nowrap;
  }

  .zoom-in {
    transition: transform 0.3s ease;
  }

  .zoom-in:hover {
    transform: scale(1.1);
  }

</style>
<!-- Swiper -->

{{ $sliderImages := .Site.Params.sliders.images }}

{{ if len $sliderImages }}
<div class="swiper mySwiper">
  <div class="swiper-wrapper">
    {{ range $sliderImages }}
      <div class="swiper-slide">
        <img src="sliders/{{ .url }}" alt="Slider Image" style="width:100%">
      </div>
    {{ end }}
  </div>
  <div class="swiper-button-next"></div>
  <div class="swiper-button-prev"></div>
  <div class="swiper-pagination"></div>
</div>
{{ end }}
  <!-- Initialize Swiper -->
  <script>
  document.addEventListener('DOMContentLoaded', (event) => {
    var swiper = new Swiper(".mySwiper", {
      spaceBetween: 30,
      centeredSlides: true,
      autoplay: {
        delay: 2500,
        disableOnInteraction: false,
      },
      pagination: {
        el: ".swiper-pagination",
        clickable: true,
      },
      navigation: {
        nextEl: ".swiper-button-next",
        prevEl: ".swiper-button-prev",
      },
    });


  });
</script>



<script>
  function scrollRight() {
    const container = document.querySelector('.scroll-content');
    const scrollAmount = 100;
    container.scrollBy({ left: scrollAmount, behavior: 'smooth' });


    if (container.scrollLeft + container.clientWidth >= container.scrollWidth) {
      container.scrollTo({ left: 0, behavior: 'auto' });
    }
  }

  function startAutoScroll() {
    scrollRight();
    setInterval(scrollRight, 1000);
  }

  window.onload = function() {
    startAutoScroll();
  };
</script>

<!-- Container Utama dengan Grid -->
<div class="grid grid-cols-1 md:grid-cols-6 gap-4 lg:gap-8 bg-white dark:bg-gray-800 p-5">

  <div class="bg-gray-200 dark:bg-gray-700 rounded-lg p-4 md:col-span-4">
    {{ $frontBundle := .Site.Params.frontBundle | default "berita" }}
    <h2 class="text-2xl font-bold text-center text-gray-800 dark:text-gray-100">{{ $frontBundle | title }}</h2>
    <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-6 gap-4 mb-8 px-5">
      {{ range first 6 (where .Site.RegularPages.ByDate.Reverse "Type" $frontBundle) }}
      <div class="rounded-lg w-full h-full">
        {{- partial "blog-card.html" . -}}
      </div>
      {{ end }}
    </div>
    {{ if gt (len (where .Site.RegularPages.ByDate.Reverse "Type" $frontBundle)) 6 }}
    <div class="text-center mb-8 mt-4">
      <a class="px-8 py-3 rounded transition-colors {{ default "bg-defaultColor" .Site.Params.ascentColor }} text-gray-100 hover:text-gray-800 dark:bg-gray-900 dark:text-gray-400 dark:hover:text-white" href="{{ lower (replace $frontBundle " " "-") | absLangURL }}" lang="{{ .Lang }}">
        {{ i18n "morePosts" }}
      </a>
    </div>
    {{ end }}
  </div>

  <div class="bg-gray-200 dark:bg-gray-700 rounded-lg p-4 md:col-span-2">
    {{ $frontBundle2 := .Site.Params.frontBundle2 | default "gallery" }}
    <div class="scroll-container pb-5">
      <h2 class="text-2xl font-bold text-center text-gray-800 dark:text-gray-100">{{ $frontBundle2 | title }}</h2>
      <div class="scroll-content animation fade-in h-96 mb-5">
        {{ range first 9 (where .Site.RegularPages.ByDate.Reverse "Type" $frontBundle2) }}
        <div class="rounded-lg h-full mb-2">
          <div class="content hover transition duration-500 ease-in-out h-full">{{- partial "blog-card.html" . -}}</div>
        </div>
        {{ end }}
      </div>
    </div>
  </div>

</div>

<!--<div class="grid md:grid-cols-1 gap-4 lg:gap-x-16">
    <div>
      {{ $frontBundle := .Site.Params.frontBundle | default "berita" }}
      <h2 class="text-2xl font-bold mt-6 text-center">{{ $frontBundle | title }}</h2>
      <div class="container p-6 mx-auto grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 lg:gap-8">
        {{ range first 6 (where .Site.RegularPages.ByDate.Reverse "Type" $frontBundle)  }}
          {{- partial "blog-card.html" . -}}
        {{ end }}
      </div>

      {{ if gt (len (where .Site.RegularPages.ByDate.Reverse "Type" $frontBundle)) 6 }}
      <div class="text-center mb-8">
        <a class="px-8 py-3 rounded transition-colors {{ .Site.Params.ascentColor | default "bg-pink-50" }}
          text-gray-500 hover:text-gray-800 dark:bg-gray-900 dark:text-gray-400 dark:hover:text-white"
          href="{{ (index (.Site.Menus.main) 0).URL | absLangURL }}" lang="{{ .Lang }}">
          {{ i18n "morePosts" }}
        </a>
      </div>
      {{ end }}
    </div>-->

<!--<div>
      {{ $frontBundle2 := .Site.Params.frontBundle2 | default "gallery" }}
      <h2 class="text-2xl font-bold mt-6 text-center dark:text-black">{{ $frontBundle2 | title }}</h2>
      <div class="container p-6 mx-auto grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-1 lg:gap-1">
        {{ range first 6 (where .Site.RegularPages.ByDate.Reverse "Type" $frontBundle2)  }}
          {{- partial "blog-card.html" . -}}
        {{ end }}
      </div>
    </div>


    {{ if gt (len (where .Site.RegularPages.ByDate.Reverse "Type" $frontBundle2)) 6 }}
      <div class="text-center mb-8">
        <!--<a class="px-8 py-3 rounded transition-colors {{ .Site.Params.ascentColor | default "bg-pink-50" }}
          text-gray-500 hover:text-gray-800 dark:bg-gray-900 dark:text-gray-400 dark:hover:text-white"
          href="{{ (index (.Site.Menus.main) 0).URL | absLangURL }}" lang="{{ .Lang }}">
          {{ i18n "morePosts" }}
        </a>
      </div>
    {{ end }}
  </div>-->


  <!-- Agenda Section -->
{{ $agenda := .Site.Params.agenda }}
{{ if $agenda }}
<div class="w-full max-w-full p-4 border border-gray-300 shadow rounded-2xl mb-6 pb-6" style="background-color: #50B069;">
  <h2 class="text-2xl font-bold mt-6 text-center text-white dark:text-white mb-4">Agenda</h2>
    <div class="marquee-container" style="overflow: hidden; white-space: nowrap;">
        <div class="marquee-content" style="display: inline-flex; animation: marquee 30s linear infinite;">
            {{ range $agenda }}
            <div class="agenda-item flex-grow dark:bg-gray-900 bg-white rounded-lg flex mx-4" style="background-color: white; width: 450px; overflow: hidden; box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.8);">
                <div class="flex-none p-6 rounded-l-lg h-full flex flex-col justify-center items-center" style="background-color: #2F9292; text-align: center; width: 150px;">
                    <h2 class="font-bold text-white text-7xl" data-day="{{ .hari }}">Loading...</h2>
                    <h3 class="text-2xl text-white">{{ .hari }}</h3>
                </div>
                <div class="ml-4 flex-grow" style="max-width: calc(450px - 100px); overflow: hidden;">
                    <h3 class="font-bold mt-2" style="font-size: 15px; line-height: 1.5; min-height: 4.5em; display: flex; flex-direction: column; justify-content: center; white-space: normal; word-break: break-word; overflow-wrap: break-word; max-width: 100%;">{{ .judul }}</h3>
                    <hr style="border-top: 1px solid black; margin-top: 8px; margin-bottom: 8px; width: 100%;">
                    <div class="flex items-center mt-4 mb-2" style="white-space: normal; word-break: break-word; overflow-wrap: break-word; max-width: 100%;">
                        <div class="flex-none w-6 h-6 mr-2">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-full h-full">
                                <path d="M21 10c0 6-9 13-9 13S3 16 3 10a9 9 0 1 1 18 0z"></path>
                                <circle cx="12" cy="10" r="3"></circle>
                            </svg>
                        </div>
                        <p style="white-space: normal; word-break: break-word; overflow-wrap: break-word; max-width: calc(450px - 100px - 2rem);">{{ .lokasi }}</p>
                    </div>
                    <p style="text-align: right; margin-top: 8px; margin-right: 8px; color: #989292;">{{ .jamMulai }} - {{ .jamSelesai }}</p>
                </div>
            </div>
            {{ end }}
        </div>
    </div>
</div>

{{ end }}

<style>
@keyframes marquee {
    from { transform: translateX(100%); }
    to { transform: translateX(-100%); }
}

.marquee-container {
    overflow: hidden;
    white-space: nowrap;
    width: 100%;
}


</style>

<script>
  function getCurrentDate(day) {
    const today = new Date();
    const dayIndex = ["Minggu", "Senin", "Selasa", "Rabu", "Kamis", "Jumat", "Sabtu"].indexOf(day);
    const currentDayIndex = today.getDay();

    // Menghitung awal minggu (hari Minggu di minggu ini)
    const startOfWeek = today.getDate() - currentDayIndex;
    
    // Tentukan offset: jika hari yang diinginkan sudah lewat, tambahkan 7 hari untuk minggu depan
    const dayOffset = (dayIndex < currentDayIndex) ? 7 : 0;

    // Hitung tanggal untuk hari yang diinginkan, mungkin minggu depan jika hari sudah lewat
    const dateForDay = new Date(today.setDate(startOfWeek + dayIndex + dayOffset));
    
    return dateForDay.getDate();
  }

  document.querySelectorAll('[data-day]').forEach(element => {
    const day = element.getAttribute('data-day');
    if (day) {
      element.textContent = getCurrentDate(day);
    }
  });
</script>


</div>



  {{- partial "intro.html" . -}}
{{ end }}

